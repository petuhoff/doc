<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="topic_x5n_gv5_qf">
  <title>Создание собственных блоков путем написания собственного класса в коде библиотек блоков и
    модуля генерации кода</title>
  <body>

              <p>Для создания собственных блоков с нуля необходимо:</p>
              <ul id="ul_xqz_1ct_qy">
                <li>
                  <p>вставить на схему любой блок автоматики, по визуальному представлению и
                    свойствам близкий к желаемому;</p>
                </li>
                <li>
                  <p>выделить вставленный блок и в главном меню программы выбрать «Правка – Изменить
                    блок»;</p>
                </li>
                <li>
                  <p>добавить нужные свойства блока в закладке «Свойства»;</p>
                </li>
                <li>
                  <p>исправить в закладке «Расчёт» параметр «Расчётный шаблон». Ниже приведены
                    комментарии что исправлять:</p>
                </li>
              </ul>
              <p>mbty_std.dll – это имя DLL, где содержится класс для локального моделирования;</p>
              <p>TSum – имя расчётного класса, внутри DLL для локального моделирования;</p>
              <p>add_dbl – имя класса генерации кода внутри библиотеки генерации кода</p>
              <ul id="ul_yqz_1ct_qy">
                <li>
                  <p>изменить тип блока и сохранить его в библиотеке.</p>
                </li>
                <li>
                  <p>дописать в исходниках библиотеки локального моделирования (например
                    std_lib.dll) и в библиотеке генерации кода (get_lib.dll) соответствующие
                    классы.</p>
                </li>
              </ul>
              <p>Можно добавить свой новый класс для локального моделирования как в библиотеку
                mbty_std.dll , так и сделать свою отдельную. Для создания собственного класса внутри
                библиотеки mbty_std.dll необходимо добавить его в исходники, они находятся в папке
                &lt;директория установки>\source\MBTY\STD_LIB. В библиотеке при помощи среды
                разработки Delphi XE создаётся или новый файл или изменяется один из существующих
                (например src.pas). Класс можно создать по аналогии с уже имеющимися, изменив
                соответственно методы InfoFunc и RunFunc. После того как добавлен собственный класс
                в исходники, необходимо внести его в функцию CreateObject в модуле Info.pas (таблица
                ClassTable).</p>
              <p>Для того чтобы по данному блоку генерировался код, необходимо добавить модуль
                генерации кода в библиотеку get_lib.dll, исходники которой располагаются в
                &lt;директория установки>\source\MBTY\AVRORA_GEN. Класс генерации кода добавляется в
                модуль Blocks.pas по аналогии с другими классами генерации которые там уже есть.
                Обязательно необходимо внести создание класса по имени в функцию
                CreateBlockGenerator.</p>
  </body>
</topic>
