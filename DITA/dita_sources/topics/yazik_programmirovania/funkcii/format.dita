<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="topic_v4b_tyc_rf">
<title>format</title>
<shortdesc>Установки глобального формата формирования строки из переменной с плавающей
    запятой.</shortdesc>
<body>
<section>
      <title>Синтаксис:</title>
      <codeblock><funcname>format</funcname>(type, par1, par2);</codeblock>
    </section>
<section>
      <title>Аргументы:</title>
      <p>type – формат формируемой строки,</p>
      <p>par1 – первый параметр формата формируемой строки,</p>
      <p>par2 – второй параметр формата формируемой строки. </p>
    </section>
<section><title>Описание:</title>
<p><codeph>format(type, par1, par2)</codeph> – установка формата формирования строки из переменной
        типа «число с плавающей запятой». Формат используется в функции datatostr и при отображении
        переменных в окне просмотра переменных. Если количество цифр в формируемой строке меньше
        количества цифр исходного числа, число округляется. Если количество цифр в формируемой
        строке меньше количества цифр исходного числа, число округляется. Переменная
          <codeph>type</codeph> определяет формат вывода: <ol id="ol_ex3_sv2_xx">
          <li>Формат автоматический (general). <codeph>type</codeph> = 0. Число преобразовывается в
            наиболее возможно короткую десятичную строку, используя фиксированный (fixed) или
            научный формат (scientific). Нули в конце числа удаляются. Десятичная точка ставится
            только в случае необходимости. Фиксированный формат применяется, когда в значении числа
            количество цифр, стоящих слева от десятичной точки, меньше либо равно par1 или, когда
            значение числа >= 0.00001. В противном случае, применяется научный формат, а параметр
            par2 определяет минимальное число цифр в экспоненте (0.. 4).</li>
          <li>Формат научный (scientific). <codeph>type</codeph> = 1. <codeph>par1</codeph> –
            количество значащих цифр мантиссы, минимальное значение – 2 цифры; <codeph>par2</codeph>
            – количество значащих цифр экспоненты, минимальное значение – 1 цифра. Число
            преобразуется в строку формата "-x.xxx…E+xxxx". Строка начинается со знака "-" (если
            число отрицательное). Десятичной точке всегда предшествует одна цифра. Параметр
              <codeph>par1</codeph> определяет общее количество десятичных цифр, стоящих до символа
            экспоненты "E" (включая цифру слева от десятичного разделителя). За символом экспоненты
            следует знак плюс или минус и до 4 цифр, определяющих степень экспоненты. Минимальное
            число цифр в экспоненте указывается в параметре <codeph>par1</codeph>.</li>
          <li>Формат фиксированный (fixed). <codeph>type</codeph> = 2. <codeph>par1</codeph> – общее
            количество значащих цифр, минимальное значение – 2 цифры; <codeph>par2</codeph> –
            количество цифр после запятой. Значение преобразуется в строку вида "-ххх.ххх…". Если
            число отрицательное, то впереди строки будет поставлен знак "-". Десятичной точке всегда
            предшествует минимум одна цифра. Количество значащих цифр после десятичной точки (0…18)
            указывается в параметре <codeph>par2</codeph>. Если количество разрядов слева от
            разделителя превышает значение, указанное в параметре <codeph>par1</codeph>, то для
            форматирования будет использоваться научный формат (ffExponent).</li>
        </ol></p></section>
<section>
      <title>Результат:</title>
      <p>нет</p>
    </section>  
<section><title>Пример:</title>
<codeblock><kword>var</kword>
x1:<rword>double</rword> = 3.14159,
x2:<rword>double</rword> = 31.4159,
x3:<rword>double</rword> = 314.159;
<comment>//сформируем строку из переменной в формате general</comment>
<funcname>format</funcname>(0, 4, 0);                                   
s1 = <funcname>datatostr</funcname>(x1); <comment>// «3.142»</comment>
<comment>//сформируем строку из переменной в формате scientific</comment>
<funcname>format</funcname>(1, 3, 2);                                      
s2 = <funcname>datatostr</funcname>(x3); <comment>// «3.14E+02»                     </comment>
<comment>//сформируем строку из переменной в формате fixed     </comment>
<funcname>format</funcname>(2, 4, 3);                                      
s3 = <funcname>datatostr</funcname>(x3); <comment>// «314.200»                      </comment>
<funcname>format</funcname>(2, 6, 3);                                      
s4 = <funcname>datatostr</funcname>(x3); <comment>// «314.159»                      </comment>
<funcname>format</funcname>(2, 1, 3);                                      
s5 = <funcname>datatostr</funcname>(x3); <comment>// « 3.1E002»                     </comment></codeblock></section>
<p>В результате переменная <codeph>s1</codeph> будет содержать строку «3.142» - выводятся 4 значащих
      цифры, число округляется; переменная <codeph>s2</codeph> будет содержать строку «3.14E+02» -
      выводятся 3 цифры мантиссы и 2 цифры экспоненты в экспоненциальной форме записи, переменная
        <codeph>s3</codeph> будет содержать строку «314.200», переменная <codeph>s4</codeph> будет
      содержать строку «314.159», переменная <codeph>s5</codeph> будет содержать строку «3.1E002». </p>  
  </body>
</topic>
